{% extends 'base.html' %}
{% load static %}
{% block content %}
{% include "customerheader.html" %}

<section style="padding: 20px; font-family: Arial, sans-serif;">
    <h1 style="color: #0d1b2a;">Shopping Cart</h1>
    
    {% if items %}
    <div style="display: flex; gap: 30px; flex-wrap: wrap;">
        <!-- Cart Items -->
        <div style="flex: 2;">
            <h2 style="color: #0d1b2a;">Cart Items</h2>
            <table style="width: 100%; border-collapse: collapse; margin-top: 10px;">
                <thead>
                    <tr style="background-color: #0d1b2a; color: #fff;">
                        <th style="padding: 10px; border: 1px solid #ddd;">Product</th>
                        <th style="padding: 10px; border: 1px solid #ddd;">Quantity</th>
                        <th style="padding: 10px; border: 1px solid #ddd;">Price</th>
                        <th style="padding: 10px; border: 1px solid #ddd;">Action</th>
                    </tr>
                </thead>
                <tbody>
                    {% for item in items %}
                    <tr>
                        <td style="padding: 10px; border: 1px solid #ddd;">{{ item.product.name }}</td>
                        <td style="padding: 10px; border: 1px solid #ddd;">{{ item.quantity }}</td>
                        <td style="padding: 10px; border: 1px solid #ddd;">‚Çπ{{ item.get_total }}</td>
                        <td style="padding: 10px; border: 1px solid #ddd;">
                            <a href="{% url 'remove_from_cart' item.id %}" style="color: red; text-decoration: none;">Remove</a>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
            <a href="{% url 'all_products' %}" style="display: inline-block; margin-top: 15px; padding: 8px 12px; background-color: #0d1b2a; color: #fff; border-radius: 5px; text-decoration: none;">
                ‚Üê Continue Shopping
            </a>
        </div>

        <!-- Order Summary -->
        <div style="flex: 1; border: 1px solid #ddd; border-radius: 10px; padding: 15px; background-color: #f7f7f7; height: fit-content;">
            <h2 style="color: #0d1b2a;">Order Summary</h2>
            <div style="margin-top: 10px;">
                <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                    <span>Subtotal</span>
                    <span>‚Çπ{{ subtotal }}</span>
                </div>
                <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                    <span>GST (18%)</span>
                    <span>‚Çπ{{ gst }}</span>
                </div>
                <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                    <span>Shipping</span>
                    <span>‚Çπ{{ shipping }}</span>
                </div>
                {% if subtotal > 1000 %}
                <div style="margin-bottom: 8px; color: green; font-weight: bold;">
                    üéâ Free shipping applied!
                </div>
                {% endif %}
                <div style="display: flex; justify-content: space-between; font-weight: bold; margin-top: 10px; border-top: 1px solid #ddd; padding-top: 10px;">
                    <span>Total</span>
                    <span>‚Çπ{{ total }}</span>
                </div>
            </div>

            <a href="{% url 'checkout_cart' %}" style="display: block; margin-top: 15px; text-align: center; padding: 10px 0; background-color: #0d1b2a; color: #fff; border-radius: 5px; text-decoration: none;">
                Proceed to Checkout
            </a>

            <div style="margin-top: 10px; font-size: 12px; color: gray;">
                Secure checkout with SSL encryption
            </div>
        </div>
    </div>
    {% else %}
    <div style="text-align: center; padding: 50px;">
        <i class="fas fa-shopping-bag" style="font-size: 60px; color: #0d1b2a;"></i>
        <h2 style="margin-top: 20px; color: #0d1b2a;">Your cart is empty</h2>
        <p>Add some products to get started</p>
        <a href="{% url 'all_products' %}" style="padding: 10px 15px; background-color: #0d1b2a; color: #fff; border-radius: 5px; text-decoration: none;">Continue Shopping</a>
    </div>
    {% endif %}
</section>

{% include "footer.html" %}
{% endblock %}
